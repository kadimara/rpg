var k=Object.defineProperty;var D=(e,s,t)=>s in e?k(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var u=(e,s,t)=>D(e,typeof s!="symbol"?s+"":s,t);import{D as w,s as C,E as y,e as m,c as g,b as p,f,o as v,i as E,h as A,u as h,F as G,G as S,H as T,I as q,v as B,J as b,l as F}from"./scheduler.CiY16n3P.js";import{i as _}from"./data.CNihxOOj.js";import{S as H,i as J,t as L,d as O}from"./index.DNYLjpUt.js";class I{static get items(){return w(_)}static findItemId(s){var i;const t=(i=this.items.find(l=>this.hitItem(l,s)))==null?void 0:i._id;return t??-1}static hitItem(s,t){const i=s.anchor;return s.cells.some(l=>t[0]==i[0]+l[0]&&t[1]==i[1]+l[1])}static canDrop(s,t){const i=s.cells.map(n=>[t[0]+n[0],t[1]+n[1]]),l=this.items.filter(n=>n._id!=s._id);for(t of i)if(t[0]<0||this.columns-1<t[0]||t[0]<0||this.rows-1<t[1]||l.some(n=>!!this.hitItem(n,t)))return!1;return!0}static add(s,t){return this.canDrop(s,t)?(_.set([...this.items,{...s,anchor:t,_id:this.items.length}]),!0):!1}static tryAdd(s){for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)if(this.add(s,[i,t]))return!0;return!1}static remove(s){_.set(this.items.filter(t=>t._id!=s))}static get(s){return this.items.find(t=>t._id==s)}}u(I,"columns",5),u(I,"rows",5);function V(e){let s,t,i,l,n;const c=e[3].default,o=y(c,e,e[2],null);return{c(){s=m("dialog"),t=m("div"),o&&o.c(),this.h()},l(a){s=g(a,"DIALOG",{class:!0});var d=p(s);t=g(d,"DIV",{class:!0});var r=p(t);o&&o.l(r),r.forEach(f),d.forEach(f),this.h()},h(){v(t,"class","inner svelte-1xvfmfw"),v(s,"class","svelte-1xvfmfw")},m(a,d){E(a,s,d),A(s,t),o&&o.m(t,null),e[6](s),i=!0,l||(n=[h(t,"click",G(e[5])),h(s,"close",e[4]),h(s,"click",e[1])],l=!0)},p(a,[d]){o&&o.p&&(!i||d&4)&&S(o,c,a,a[2],i?q(c,a[2],d,null):T(a[2]),null)},i(a){i||(L(o,a),i=!0)},o(a){O(o,a),i=!1},d(a){a&&f(s),o&&o.d(a),e[6](null),l=!1,B(n)}}}function j(e,s,t){let{$$slots:i={},$$scope:l}=s,{dialog:n}=s;const c=r=>{n.close()};function o(r){b.call(this,e,r)}function a(r){b.call(this,e,r)}function d(r){F[r?"unshift":"push"](()=>{n=r,t(0,n)})}return e.$$set=r=>{"dialog"in r&&t(0,n=r.dialog),"$$scope"in r&&t(2,l=r.$$scope)},[n,c,l,i,o,a,d]}class P extends H{constructor(s){super(),J(this,s,j,V,C,{dialog:0})}}export{P as D,I};
