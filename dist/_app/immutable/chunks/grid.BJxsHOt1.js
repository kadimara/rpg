import{s as L,e as D,a as O,c as E,b as z,g as V,f as d,o as A,w as _,i as k,h as p,u as q,n as G,q as F,v as P,y as Q,t as y,d as I,j as M,r as S,l as R}from"./scheduler.CiY16n3P.js";import{e as b,u as T,d as U}from"./each.B8sSIOQY.js";import{S as X,i as Y}from"./index.DNYLjpUt.js";function j(n,e,l){const t=n.slice();t[14]=e[l],t[17]=l;const r=t[4]==t[14]._id;return t[15]=r,t}function C(n,e,l){const t=n.slice();return t[18]=e[l],t[17]=l,t}function H(n,e,l){const t=n.slice();t[20]=e[l],t[17]=l;const r=t[17]%t[1];t[21]=r;const f=Math.floor(t[17]/t[1]);return t[22]=f,t}function N(n,e){let l,t,r=e[21]+"",f,i,s=e[22]+"",c;return{key:n,first:null,c(){l=D("div"),t=y("x: "),f=y(r),i=y(", y: "),c=y(s),this.h()},l(g){l=E(g,"DIV",{class:!0,style:!0});var h=z(l);t=I(h,"x: "),f=I(h,r),i=I(h,", y: "),c=I(h,s),h.forEach(d),this.h()},h(){A(l,"class","cell svelte-13nafz"),_(l,"--x",e[21]),_(l,"--y",e[22]),this.first=l},m(g,h){k(g,l,h),p(l,t),p(l,f),p(l,i),p(l,c)},p(g,h){e=g,h&6&&r!==(r=e[21]+"")&&M(f,r),h&6&&s!==(s=e[22]+"")&&M(c,s),h&6&&_(l,"--x",e[21]),h&6&&_(l,"--y",e[22])},d(g){g&&d(l)}}}function Z(n){let e=n[14].name+"",l;return{c(){l=y(e)},l(t){l=I(t,e)},m(t,r){k(t,l,r)},p(t,r){r&8&&e!==(e=t[14].name+"")&&M(l,e)},d(t){t&&d(l)}}}function W(n){let e,l,t=n[17]==0&&Z(n);function r(...i){return n[9](n[18],...i)}function f(...i){return n[10](n[18],...i)}return{c(){e=D("div"),t&&t.c(),l=O(),this.h()},l(i){e=E(i,"DIV",{class:!0,style:!0});var s=z(e);t&&t.l(s),l=V(s),s.forEach(d),this.h()},h(){A(e,"class","item cell svelte-13nafz"),_(e,"--x",n[14].anchor[0]+n[18][0]),_(e,"--y",n[14].anchor[1]+n[18][1]),_(e,"position","relative"),_(e,"margin-right",(n[14].cells.find(r)?-5:0)+"px"),_(e,"margin-bottom",(n[14].cells.find(f)?-5:0)+"px")},m(i,s){k(i,e,s),t&&t.m(e,null),p(e,l)},p(i,s){n=i,n[17]==0&&t.p(n,s),s&8&&_(e,"--x",n[14].anchor[0]+n[18][0]),s&8&&_(e,"--y",n[14].anchor[1]+n[18][1]),s&8&&_(e,"margin-right",(n[14].cells.find(r)?-5:0)+"px"),s&8&&_(e,"margin-bottom",(n[14].cells.find(f)?-5:0)+"px")},d(i){i&&d(e),t&&t.d()}}}function B(n){let e,l,t,r=b(n[14].cells),f=[];for(let i=0;i<r.length;i+=1)f[i]=W(C(n,r,i));return{c(){e=D("div"),l=O();for(let i=0;i<f.length;i+=1)f[i].c();t=S(),this.h()},l(i){e=E(i,"DIV",{class:!0,style:!0}),z(e).forEach(d),l=V(i);for(let s=0;s<f.length;s+=1)f[s].l(i);t=S(),this.h()},h(){A(e,"class","item svelte-13nafz"),_(e,"--x",n[14].anchor[0]),_(e,"--y",n[14].anchor[1]),_(e,"--width",n[7](n[14])),_(e,"--height",n[8](n[14])),_(e,"position","relative"),_(e,"left",(n[15]?n[5].x:0)+"px"),_(e,"top",(n[15]?n[5].y:0)+"px")},m(i,s){k(i,e,s),k(i,l,s);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(i,s);k(i,t,s)},p(i,s){if(s&8&&_(e,"--x",i[14].anchor[0]),s&8&&_(e,"--y",i[14].anchor[1]),s&8&&_(e,"--width",i[7](i[14])),s&8&&_(e,"--height",i[8](i[14])),s&56&&_(e,"left",(i[15]?i[5].x:0)+"px"),s&56&&_(e,"top",(i[15]?i[5].y:0)+"px"),s&8){r=b(i[14].cells);let c;for(c=0;c<r.length;c+=1){const g=C(i,r,c);f[c]?f[c].p(g,s):(f[c]=W(g),f[c].c(),f[c].m(t.parentNode,t))}for(;c<f.length;c+=1)f[c].d(1);f.length=r.length}},d(i){i&&(d(e),d(l),d(t)),F(f,i)}}}function x(n){let e,l=[],t=new Map,r,f,i,s=b(Array.apply(null,Array(n[1]*n[2])));const c=o=>o[17];for(let o=0;o<s.length;o+=1){let m=H(n,s,o),a=c(m);t.set(a,l[o]=N(a,m))}let g=b(n[3]),h=[];for(let o=0;o<g.length;o+=1)h[o]=B(j(n,g,o));return{c(){e=D("div");for(let o=0;o<l.length;o+=1)l[o].c();r=O();for(let o=0;o<h.length;o+=1)h[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0,style:!0});var m=z(e);for(let a=0;a<l.length;a+=1)l[a].l(m);r=V(m);for(let a=0;a<h.length;a+=1)h[a].l(m);m.forEach(d),this.h()},h(){A(e,"class","grid svelte-13nafz"),_(e,"--columns",n[1]),_(e,"--rows",n[2])},m(o,m){k(o,e,m);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);p(e,r);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(e,null);n[11](e),f||(i=[q(e,"pointerdown",n[12]),q(e,"click",n[13])],f=!0)},p(o,[m]){if(m&6&&(s=b(Array.apply(null,Array(o[1]*o[2]))),l=T(l,m,c,1,o,s,t,e,U,N,r,H)),m&440){g=b(o[3]);let a;for(a=0;a<g.length;a+=1){const w=j(o,g,a);h[a]?h[a].p(w,m):(h[a]=B(w),h[a].c(),h[a].m(e,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=g.length}m&2&&_(e,"--columns",o[1]),m&4&&_(e,"--rows",o[2])},i:G,o:G,d(o){o&&d(e);for(let m=0;m<l.length;m+=1)l[m].d();F(h,o),n[11](null),f=!1,P(i)}}}function $(n,e,l){let{columns:t}=e,{rows:r}=e,{items:f}=e,{movingItemId:i=-1}=e,{movingOffset:s={x:0,y:0}}=e,{grid:c=null}=e;const g=Q(),h=u=>Math.max(...u.cells.map(v=>v[0]))+1,o=u=>Math.max(...u.cells.map(v=>v[1]))+1,m=(u,v)=>v[0]==u[0]+1&&v[1]==u[1],a=(u,v)=>v[0]==u[0]&&v[1]==u[1]+1;function w(u){R[u?"unshift":"push"](()=>{c=u,l(0,c)})}const J=u=>g("pointerdown",u),K=u=>g("click",u);return n.$$set=u=>{"columns"in u&&l(1,t=u.columns),"rows"in u&&l(2,r=u.rows),"items"in u&&l(3,f=u.items),"movingItemId"in u&&l(4,i=u.movingItemId),"movingOffset"in u&&l(5,s=u.movingOffset),"grid"in u&&l(0,c=u.grid)},[c,t,r,f,i,s,g,h,o,m,a,w,J,K]}class te extends X{constructor(e){super(),Y(this,e,$,x,L,{columns:1,rows:2,items:3,movingItemId:4,movingOffset:5,grid:0})}}export{te as G};
